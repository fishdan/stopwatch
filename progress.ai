2025-12-23 Update – GitHub App bootstrap:
- Generated JWT and installation token for GitHub App ai-codex-dan; validated /app identity and /installation/repositories access.
- Confirmed installation permissions (write across contents, checks, workflows, secrets; no admin scopes) and repository visibility list from GitHub.
- Created /tmp/git-askpass.sh with the current installation token (expires 2025-12-24T00:09:39Z) and configured git user to ai-codex-dan[bot] with noreply email.
- Initialized git repository in /projects/fishdan/stopwatch; attempted to create GitHub repo fishdan/stopwatch via installation token but received 403 Resource not accessible by integration—awaiting guidance/permissions.
2025-12-23 Update – Repository creation and push:
- Remote set to https://github.com/fishdan/stopwatch.git after repo was provisioned; added .gitignore to keep secrets out of source control.
- Committed repo.ai, start.ai, progress.ai, and .gitignore with bot identity; pushed master with GIT_ASKPASS using installation token.
2025-12-23 Update – Speclit for stopwatch app:
- Drafted speclit/stopwatch.ai outlining goals, functional requirements, UI, platform considerations, open questions, and backlog tasks (SK-1..SK-7) for the RN overlay stopwatch.
- Captured iOS overlay constraints and need for platform decision before implementation.
2025-12-23 Update – Clarified requirements:
- User decisions: prioritize Android overlay; iOS can be in-app floating overlay; no lock-screen visibility; closing resets timer; drag-to-reposition desired.
- Updated speclit/stopwatch.ai to reflect resolved questions and backlog alignment.
2025-12-23 Update – RN scaffold and stopwatch UI:
- Created React Native project StopwatchApp (v0.73.6, TypeScript) with initial overlay stopwatch UI and controls (start/stop toggle, clear, close) and drag-to-reposition inside app; format mm:ss:ff using monotonic timestamps.
- Added Android manifest permissions for SYSTEM_ALERT_WINDOW and FOREGROUND_SERVICE to prep overlay service work.
- Close action resets timer and hides overlay; reopen affordance provided inside app.
2025-12-23 Update – Overlay permission scaffolding:
- Fixed overlay drag bounds and sizing constants; added Android overlay permission banner/button in UI.
- Implemented native module (OverlayPermissionModule/Package) to check/request SYSTEM_ALERT_WINDOW via settings; registered package in MainApplication.
2025-12-25 Update – Authentication and Planning:
- Bootstrapped GitHub App authentication successfully; validated credentials and configured git user as ai-codex-dan[bot].
- Verified codebase state: Timer logic and permissions scaffolding are present.
- Next Work: Transitioning StopwatchOverlay from an in-app view to a true Android system overlay via Foreground Service (SK-4).
2025-12-25 Update – Android System Overlay (SK-4):
- Implement StopwatchService.kt: Native Android Foreground Service to host the overlay view independent of RN activity.
- Implement StopwatchModule.kt: JSI Bridge to start/stop the service from React Native.
- Updated AndroidManifest: Registered service with foregroundServiceType="specialUse".
- Updated App.tsx: Added "Open System Overlay" button to trigger the native service.
- Verification Needed: Run on Android Device, grant "Display over other apps", and test persistence when app is backgrounded.
2025-12-25 Update – Android Overlay Verified:
- Successfully verified Android System Overlay on physical device (Android 16).
- Fixed crash issues by adding 'specialUse' foreground service type and matching permission in AndroidManifest.
- Added permission check in App.tsx to prompt user if 'Display over other apps' is missing.
- Verified timer counts and drag persistence works in background.
- SK-4 is COMPLETE.
2025-12-25 Update – Android Release Build Ready (SK-8):
- Generated release keystore (android/app/release.keystore).
- Configured secure signing in build.gradle using android/key.properties.
- Enabled ProGuard/Minification for release builds.
- Successfully built signed Android App Bundle (.aab).
- SK-8 is COMPLETE.
2025-12-25 Update – UI Polish & Shareable APK:
- Implemented "Dark Glass" UI theme for both Native Overlay and React Native App (SK-6).
- Created custom vector assets for Play, Pause, Stop, Close.
- Generated standalone signed APK for sharing: android/app/build/outputs/apk/release/app-release.apk.
2025-12-25 Update – Auto-Launch Implementation:
- Modified App.tsx to automatically launch the system overlay if permissions are already granted.
- Updated the release APK (v1.0.0) on GitHub with the latest build.
2025-12-25 Update – Versioning Policy & v1.0.1 Release:
- Adopted semantic versioning and incremented to v1.0.1.
- Aligned version strings in package.json (1.0.1) and Android build.gradle (versionCode 2, versionName "1.0.1").
- Fixed package name to lowercase (stopwatch-app) per npm/lint standards.
- Published official v1.0.1 release on GitHub with updated auto-launch feature.
